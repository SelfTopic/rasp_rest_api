# Rasp REST API
### REST API для получения расписания занятий Восточно-Сибирского государственного университета технологий и управления в виде изображений.

### Возможности
- Парсинг актуального расписания с официального портала ЕSSTU

### Генерация изображений с расписанием на сегодня и завтра

- REST API для получения расписания по номеру группы

- Поддержка аутентификации через токен

- Контейнеризация с Docker

### Установка и запуск
- С помощью Docker (рекомендуемый способ)

#### Клонируйте репозиторий:

```bash
git clone <ваш-репозиторий>
cd rasp_rest_api
```
#### Запустите с помощью Docker Compose:

```bash
docker-compose up -d
```
Приложение будет доступно по адресу: `http://localhost:5000`

### Локальная установка
- Убедитесь, что у вас установлен Python 3.13+ и Poetry

### Установите зависимости:

```bash
poetry install
```

### Запустите приложение:

```bash
poetry run python -m src
```

## Использование API
### Получение расписания
- `Endpoint: GET /schedule/<day>/<group>`

### Параметры:

- day: today (сегодня) или tommorow (завтра)

- group: номер группы (например, Б735)

## Заголовки:

- `Token-Self`: секретный токен для аутентификации

### Пример запроса с помощью curl:

```bash
curl -H "Token-Self: YOUR_SECRET_TOKEN" http://localhost:5000/schedule/today/Б735 -o schedule.png
```

### Примеры использования
В папке examples находятся примеры использования API:

- `get_group.py` - пример получения информации о группе

- `get_schedule.py` - пример получения расписания

## Конфигурация
### Переменные окружения
- `SECRET_TOKEN` - секретный токен для аутентификации (по умолчанию: "secret")

## Настройка через Docker
### Вы можете настроить приложение через переменные окружения в docker-compose.yml:

```yaml
environment:
  - SECRET_TOKEN=your_custom_token
```

## Структура проекта
```text
rasp_rest_api/
├── src/                    # Исходный код приложения
│   ├── services/          # Сервисные классы
│   │   ├── schedule.py    # Парсер расписания
│   │   └── validate.py    # Валидация запросов
│   ├── routers/           # Маршруты API
│   └── config.py          # Конфигурация приложения
├── images/                # Генерируемые изображения расписания
├── examples/              # Примеры использования API
├── Dockerfile            # Конфигурация Docker
└── docker-compose.yml    # Конфигурация Docker Compose
```

## Разработка
### Добавление новых групп
- Приложение автоматически парсит расписание с официального сайта. Для добавления новой группы просто укажите её номер в запросе.

### Расширение функционала
Для добавления нового функционала:

- Создайте новый сервис в папке src/services/

- Добавьте маршрут в src/routers/routes.py

- Протестируйте работу API

## Ограничения
- Приложение зависит от структуры сайта portal.esstu.ru, изменения на сайте могут нарушить работу парсера

- Расписание обновляется в соответствии с актуальными данными на сайте университета

## Лицензия
- Проект распространяется под лицензией MIT.